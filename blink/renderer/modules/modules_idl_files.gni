# Copyright 2016 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//third_party/blink/renderer/bindings/bindings.gni")
import("//third_party/blink/renderer/config.gni")

# The paths in this file are absolute since this file is imported and the
# file lists must be valid from multple "current directories".

bindings_modules_output_dir = "$bindings_output_dir/modules"
blink_modules_output_dir = "$root_gen_dir/third_party/blink/renderer/modules"

modules_core_global_constructors_original_interfaces = [
  "AnimationWorkletGlobalScope",
  "AudioWorkletGlobalScope",
  "PaintWorkletGlobalScope",
  "ServiceWorkerGlobalScope",
]

# The size and the order in the following list must match to the previous one.
modules_core_global_constructors_original_interface_basenames = [
  "animation_worklet_global_scope",
  "audio_worklet_global_scope",
  "paint_worklet_global_scope",
  "service_worker_global_scope",
]

modules_global_constructors_original_interfaces = [
  "AnimationWorkletGlobalScope",
  "AudioWorkletGlobalScope",
  "DedicatedWorkerGlobalScope",
  "PaintWorkletGlobalScope",
  "ServiceWorkerGlobalScope",
  "SharedWorkerGlobalScope",
  "Window",
]

# The size and the order in the following list must match to the previous one.
modules_global_constructors_original_interface_basenames = [
  "animation_worklet_global_scope",
  "audio_worklet_global_scope",
  "dedicated_worker_global_scope",
  "paint_worklet_global_scope",
  "service_worker_global_scope",
  "shared_worker_global_scope",
  "window",
]

# The interfaces aren't technically files, but we can treat them as file names
# to get process_file_template to generate lists of IDL files corresponding
# to each interface.
modules_core_global_constructors_generated_idl_files = process_file_template(
        modules_core_global_constructors_original_interface_basenames,
        [ "$blink_modules_output_dir/{{source_name_part}}_core_constructors.idl" ])
modules_global_constructors_generated_idl_files = process_file_template(
        modules_global_constructors_original_interface_basenames,
        [ "$blink_modules_output_dir/{{source_name_part}}_modules_constructors.idl" ])

modules_idl_files =
    get_path_info(
        [
          "animationworklet/animation_worklet_global_scope.idl",
          "animationworklet/worklet_animation_effect.idl",
          "animationworklet/worklet_animation.idl",
          "animationworklet/worklet_group_effect.idl",
          "app_banner/before_install_prompt_event.idl",
          "background_fetch/background_fetch_event.idl",
          "background_fetch/background_fetch_manager.idl",
          "background_fetch/background_fetch_record.idl",
          "background_fetch/background_fetch_registration.idl",
          "background_fetch/background_fetch_update_ui_event.idl",
          "background_sync/sync_event.idl",
          "background_sync/periodic_sync_event.idl",
          "background_sync/periodic_sync_manager.idl",
          "background_sync/sync_manager.idl",
          "battery/battery_manager.idl",
          "bluetooth/bluetooth.idl",
          "bluetooth/bluetooth_advertising_event.idl",
          "bluetooth/bluetooth_characteristic_properties.idl",
          "bluetooth/bluetooth_device.idl",
          "bluetooth/bluetooth_le_scan.idl",
          "bluetooth/bluetooth_manufacturer_data_map.idl",
          "bluetooth/bluetooth_remote_gatt_characteristic.idl",
          "bluetooth/bluetooth_remote_gatt_descriptor.idl",
          "bluetooth/bluetooth_remote_gatt_server.idl",
          "bluetooth/bluetooth_remote_gatt_service.idl",
          "bluetooth/bluetooth_service_data_map.idl",
          "bluetooth/bluetooth_uuid.idl",
          "broadcastchannel/broadcast_channel.idl",
          "cache_storage/cache.idl",
          "cache_storage/cache_storage.idl",
          "clipboard/clipboard.idl",
          "clipboard/clipboard_item.idl",
          "compression/compression_stream.idl",
          "compression/decompression_stream.idl",
          "contacts_picker/contact_address.idl",
          "contacts_picker/contacts_manager.idl",
          "content_index/content_index.idl",
          "content_index/content_index_event.idl",
          "cookie_store/cookie_change_event.idl",
          "cookie_store/cookie_store.idl",
          "cookie_store/cookie_store_manager.idl",
          "cookie_store/extendable_cookie_change_event.idl",
          "credentialmanager/authenticator_assertion_response.idl",
          "credentialmanager/authenticator_attestation_response.idl",
          "credentialmanager/authenticator_response.idl",
          "credentialmanager/credential.idl",
          "credentialmanager/credentials_container.idl",
          "credentialmanager/federated_credential.idl",
          "credentialmanager/password_credential.idl",
          "credentialmanager/public_key_credential.idl",
          "crypto/crypto.idl",
          "crypto/crypto_key.idl",
          "crypto/subtle_crypto.idl",
          "csspaint/paint_rendering_context_2d.idl",
          "csspaint/paint_size.idl",
          "csspaint/paint_worklet_global_scope.idl",
          "device_orientation/device_motion_event.idl",
          "device_orientation/device_motion_event_acceleration.idl",
          "device_orientation/device_motion_event_rotation_rate.idl",
          "device_orientation/device_orientation_event.idl",
          "encoding/text_decoder.idl",
          "encoding/text_decoder_stream.idl",
          "encoding/text_encoder.idl",
          "encoding/text_encoder_stream.idl",
          "encryptedmedia/media_encrypted_event.idl",
          "encryptedmedia/media_key_message_event.idl",
          "encryptedmedia/media_key_session.idl",
          "encryptedmedia/media_key_status_map.idl",
          "encryptedmedia/media_key_system_access.idl",
          "encryptedmedia/media_keys.idl",
          "eventsource/event_source.idl",
          "filesystem/directory_entry.idl",
          "filesystem/directory_entry_sync.idl",
          "filesystem/directory_reader.idl",
          "filesystem/directory_reader_sync.idl",
          "filesystem/dom_file_system.idl",
          "filesystem/dom_file_system_sync.idl",
          "filesystem/entries_callback.idl",
          "filesystem/entry.idl",
          "filesystem/entry_callback.idl",
          "filesystem/entry_sync.idl",
          "filesystem/error_callback.idl",
          "filesystem/file_callback.idl",
          "filesystem/file_entry.idl",
          "filesystem/file_entry_sync.idl",
          "filesystem/file_system_callback.idl",
          "filesystem/file_writer.idl",
          "filesystem/file_writer_callback.idl",
          "filesystem/file_writer_sync.idl",
          "filesystem/metadata.idl",
          "filesystem/metadata_callback.idl",
          "launch/launch_params.idl",
          "launch/launch_queue.idl",
          "gamepad/gamepad.idl",
          "gamepad/gamepad_axis_event.idl",
          "gamepad/gamepad_button.idl",
          "gamepad/gamepad_button_event.idl",
          "gamepad/gamepad_event.idl",
          "gamepad/gamepad_haptic_actuator.idl",
          "gamepad/gamepad_list.idl",
          "geolocation/geolocation.idl",
          "geolocation/geolocation_coordinates.idl",
          "geolocation/geolocation_position.idl",
          "geolocation/geolocation_position_error.idl",
          "hid/hid.idl",
          "hid/hid_collection_info.idl",
          "hid/hid_connection_event.idl",
          "hid/hid_device.idl",
          "hid/hid_input_report_event.idl",
          "hid/hid_report_info.idl",
          "hid/hid_report_item.idl",
          "idle/idle_detector.idl",
          "idle/idle_state.idl",
          "imagecapture/image_capture.idl",
          "imagecapture/media_settings_range.idl",
          "imagecapture/photo_capabilities.idl",
          "indexeddb/idb_cursor.idl",
          "indexeddb/idb_cursor_with_value.idl",
          "indexeddb/idb_database.idl",
          "indexeddb/idb_factory.idl",
          "indexeddb/idb_index.idl",
          "indexeddb/idb_key_range.idl",
          "indexeddb/idb_object_store.idl",
          "indexeddb/idb_observation.idl",
          "indexeddb/idb_observer.idl",
          "indexeddb/idb_observer_changes.idl",
          "indexeddb/idb_open_db_request.idl",
          "indexeddb/idb_request.idl",
          "indexeddb/idb_transaction.idl",
          "indexeddb/idb_version_change_event.idl",
          "keyboard/keyboard.idl",
          "keyboard/keyboard_layout_map.idl",
          "locks/lock.idl",
          "locks/lock_manager.idl",
          "media_capabilities/media_capabilities.idl",
          "mediacapturefromelement/canvas_capture_media_stream_track.idl",
          "mediarecorder/blob_event.idl",
          "mediarecorder/media_recorder.idl",
          "mediasession/media_metadata.idl",
          "mediasession/media_session.idl",
          "mediasource/media_source.idl",
          "mediasource/source_buffer.idl",
          "mediasource/source_buffer_list.idl",
          "mediasource/track_default.idl",
          "mediasource/track_default_list.idl",
          "mediasource/video_playback_quality.idl",
          "native_file_system/native_file_system_directory_iterator.idl",
          "native_file_system/file_system_directory_handle.idl",
          "native_file_system/file_system_file_handle.idl",
          "native_file_system/file_system_handle.idl",
          "native_file_system/file_system_writable_file_stream.idl",
          "native_file_system/file_system_writer.idl",
          "nfc/ndef_message.idl",
          "nfc/ndef_record.idl",
          "nfc/ndef_reader.idl",
          "nfc/ndef_reading_event.idl",
          "nfc/ndef_writer.idl",
          "notifications/notification.idl",
          "notifications/notification_event.idl",
          "notifications/timestamp_trigger.idl",
          "payments/abort_payment_event.idl",
          "payments/can_make_payment_event.idl",
          "payments/merchant_validation_event.idl",
          "payments/payment_address.idl",
          "payments/payment_instruments.idl",
          "payments/payment_manager.idl",
          "payments/payment_method_change_event.idl",
          "payments/payment_request.idl",
          "payments/payment_request_event.idl",
          "payments/payment_request_update_event.idl",
          "payments/payment_response.idl",
          "picture_in_picture/enter_picture_in_picture_event.idl",
          "picture_in_picture/picture_in_picture_window.idl",
          "plugins/mime_type.idl",
          "plugins/mime_type_array.idl",
          "plugins/plugin.idl",
          "plugins/plugin_array.idl",
          "presentation/presentation.idl",
          "presentation/presentation_availability.idl",
          "presentation/presentation_connection.idl",
          "presentation/presentation_connection_available_event.idl",
          "presentation/presentation_connection_close_event.idl",
          "presentation/presentation_connection_list.idl",
          "presentation/presentation_receiver.idl",
          "presentation/presentation_request.idl",
          "push_messaging/push_event.idl",
          "push_messaging/push_manager.idl",
          "push_messaging/push_message_data.idl",
          "push_messaging/push_subscription.idl",
          "push_messaging/push_subscription_change_event.idl",
          "push_messaging/push_subscription_options.idl",
          "remoteplayback/remote_playback.idl",
          "scheduler/scheduler.idl",
          "scheduler/task_controller.idl",
          "scheduler/task_signal.idl",
          "screen_orientation/screen_orientation.idl",
          "sensor/absolute_orientation_sensor.idl",
          "sensor/accelerometer.idl",
          "sensor/ambient_light_sensor.idl",
          "sensor/gyroscope.idl",
          "sensor/linear_acceleration_sensor.idl",
          "sensor/magnetometer.idl",
          "sensor/orientation_sensor.idl",
          "sensor/relative_orientation_sensor.idl",
          "sensor/sensor.idl",
          "sensor/sensor_error_event.idl",
          "shapedetection/barcode_detector.idl",
          "shapedetection/detected_barcode.idl",
          "shapedetection/detected_face.idl",
          "shapedetection/detected_text.idl",
          "shapedetection/face_detector.idl",
          "shapedetection/text_detector.idl",
          "sms/sms.idl",
          "sms/sms_receiver.idl",
          "storage/storage.idl",
          "storage/storage_event.idl",
          "wake_lock/wake_lock.idl",
          "wake_lock/wake_lock_sentinel.idl",
          "webcodecs/encoded_video_chunk.idl",
          "webcodecs/video_decoder.idl",
          "webcodecs/video_frame.idl",
          "webcodecs/video_track_reader.idl",
          "webcodecs/video_track_writer.idl",
          "webdatabase/database.idl",
          "webdatabase/sql_error.idl",
          "webdatabase/sql_result_set.idl",
          "webdatabase/sql_result_set_row_list.idl",
          "webdatabase/sql_statement_callback.idl",
          "webdatabase/sql_statement_error_callback.idl",
          "webdatabase/sql_transaction.idl",
          "webdatabase/sql_transaction_callback.idl",
          "webdatabase/sql_transaction_error_callback.idl",
          "webmidi/midi_access.idl",
          "webmidi/midi_connection_event.idl",
          "webmidi/midi_input.idl",
          "webmidi/midi_input_map.idl",
          "webmidi/midi_message_event.idl",
          "webmidi/midi_output.idl",
          "webmidi/midi_output_map.idl",
          "webmidi/midi_port.idl",
          "websockets/close_event.idl",
          "websockets/websocket.idl",
          "websockets/websocket_stream.idl",
          "webtransport/outgoing_stream.idl",
          "webtransport/quic_transport.idl",
          "webtransport/send_stream.idl",
          "webusb/usb.idl",
          "webusb/usb_alternate_interface.idl",
          "webusb/usb_configuration.idl",
          "webusb/usb_connection_event.idl",
          "webusb/usb_device.idl",
          "webusb/usb_endpoint.idl",
          "webusb/usb_in_transfer_result.idl",
          "webusb/usb_interface.idl",
          "webusb/usb_isochronous_in_transfer_packet.idl",
          "webusb/usb_isochronous_in_transfer_result.idl",
          "webusb/usb_isochronous_out_transfer_packet.idl",
          "webusb/usb_isochronous_out_transfer_result.idl",
          "webusb/usb_out_transfer_result.idl",
        ],
        "abspath")

# Do not add anything to this list. See _idl_imports below instead
# for the preferred mechanism.
modules_callback_function_idl_files = []

modules_dictionary_idl_files =
    get_path_info(
        [
          "app_banner/app_banner_prompt_result.idl",
          "app_banner/before_install_prompt_event_init.idl",
          "background_fetch/background_fetch_event_init.idl",
          "background_fetch/background_fetch_options.idl",
          "background_fetch/background_fetch_ui_options.idl",
          "background_sync/background_sync_options.idl",
          "background_sync/sync_event_init.idl",
          "background_sync/periodic_sync_event_init.idl",
          "bluetooth/bluetooth_advertising_event_init.idl",
          "bluetooth/bluetooth_le_scan_filter_init.idl",
          "bluetooth/bluetooth_le_scan_options.idl",
          "bluetooth/request_device_options.idl",
          "cache_storage/cache_query_options.idl",
          "cache_storage/multi_cache_query_options.idl",
          "canvas/canvas2d/canvas_rendering_context_2d_settings.idl",
          "canvas/canvas2d/hit_region_options.idl",
          "canvas/htmlcanvas/canvas_context_creation_attributes_module.idl",
          "clipboard/clipboard_item_options.idl",
          "contacts_picker/contact_info.idl",
          "contacts_picker/contacts_select_options.idl",
          "content_index/content_description.idl",
          "content_index/content_icon_definition.idl",
          "content_index/content_index_event_init.idl",
          "cookie_store/cookie_change_event_init.idl",
          "cookie_store/cookie_list_item.idl",
          "cookie_store/cookie_store_delete_options.idl",
          "cookie_store/cookie_store_get_options.idl",
          "cookie_store/cookie_store_set_extra_options.idl",
          "cookie_store/cookie_store_set_options.idl",
          "cookie_store/extendable_cookie_change_event_init.idl",
          "credentialmanager/authentication_extensions_client_inputs.idl",
          "credentialmanager/authentication_extensions_client_outputs.idl",
          "credentialmanager/authenticator_selection_criteria.idl",
          "credentialmanager/cable_authentication_data.idl",
          "credentialmanager/cable_registration_data.idl",
          "credentialmanager/collected_client_data.idl",
          "credentialmanager/credential_creation_options.idl",
          "credentialmanager/credential_data.idl",
          "credentialmanager/credential_request_options.idl",
          "credentialmanager/federated_credential_init.idl",
          "credentialmanager/federated_credential_request_options.idl",
          "credentialmanager/password_credential_data.idl",
          "credentialmanager/public_key_credential_creation_options.idl",
          "credentialmanager/public_key_credential_descriptor.idl",
          "credentialmanager/public_key_credential_entity.idl",
          "credentialmanager/public_key_credential_parameters.idl",
          "credentialmanager/public_key_credential_request_options.idl",
          "credentialmanager/public_key_credential_rp_entity.idl",
          "credentialmanager/public_key_credential_user_entity.idl",
          "csspaint/paint_rendering_context_2d_settings.idl",
          "device_orientation/device_motion_event_acceleration_init.idl",
          "device_orientation/device_motion_event_init.idl",
          "device_orientation/device_motion_event_rotation_rate_init.idl",
          "device_orientation/device_orientation_event_init.idl",
          "encoding/text_decode_options.idl",
          "encoding/text_decoder_options.idl",
          "encoding/text_encoder_encode_into_result.idl",
          "encryptedmedia/media_encrypted_event_init.idl",
          "encryptedmedia/media_key_message_event_init.idl",
          "encryptedmedia/media_key_system_configuration.idl",
          "encryptedmedia/media_key_system_media_capability.idl",
          "encryptedmedia/media_keys_policy.idl",
          "eventsource/event_source_init.idl",
          "filesystem/file_system_flags.idl",
          "gamepad/gamepad_axis_event_init.idl",
          "gamepad/gamepad_button_event_init.idl",
          "gamepad/gamepad_effect_parameters.idl",
          "gamepad/gamepad_event_init.idl",
          "geolocation/position_options.idl",
          "hid/hid_connection_event_init.idl",
          "hid/hid_device_filter.idl",
          "hid/hid_device_request_options.idl",
          "idle/idle_options.idl",
          "imagecapture/constrain_point_2d_parameters.idl",
          "imagecapture/photo_settings.idl",
          "imagecapture/point_2d.idl",
          "indexeddb/idb_database_info.idl",
          "indexeddb/idb_index_parameters.idl",
          "indexeddb/idb_object_store_parameters.idl",
          "indexeddb/idb_observer_init.idl",
          "indexeddb/idb_transaction_options.idl",
          "indexeddb/idb_version_change_event_init.idl",
          "installedapp/related_application.idl",
          "locks/lock_info.idl",
          "locks/lock_manager_snapshot.idl",
          "locks/lock_options.idl",
          "manifest/image_resource.idl",
          "media_capabilities/audio_configuration.idl",
          "media_capabilities/key_system_track_configuration.idl",
          "media_capabilities/media_configuration.idl",
          "media_capabilities/media_capabilities_decoding_info.idl",
          "media_capabilities/media_capabilities_info.idl",
          "media_capabilities/media_capabilities_key_system_configuration.idl",
          "media_capabilities/media_decoding_configuration.idl",
          "media_capabilities/media_encoding_configuration.idl",
          "media_capabilities/video_configuration.idl",
          "mediarecorder/blob_event_init.idl",
          "mediarecorder/media_recorder_options.idl",
          "mediasession/media_image.idl",
          "mediasession/media_metadata_init.idl",
          "mediasession/media_position_state.idl",
          "mediasession/media_session_action_details.idl",
          "mediasession/media_session_seek_to_action_details.idl",
          "native_file_system/choose_file_system_entries_options.idl",
          "native_file_system/choose_file_system_entries_options_accepts.idl",
          "native_file_system/file_system_create_writer_options.idl",
          "native_file_system/file_system_get_directory_options.idl",
          "native_file_system/file_system_get_file_options.idl",
          "native_file_system/file_system_handle_permission_descriptor.idl",
          "native_file_system/file_system_remove_options.idl",
          "native_file_system/get_system_directory_options.idl",
          "native_file_system/native_file_system_directory_iterator_entry.idl",
          "native_file_system/write_params.idl",
          "nfc/ndef_message_init.idl",
          "nfc/ndef_record_init.idl",
          "nfc/ndef_reading_event_init.idl",
          "nfc/ndef_scan_options.idl",
          "nfc/ndef_write_options.idl",
          "notifications/get_notification_options.idl",
          "notifications/notification_action.idl",
          "notifications/notification_event_init.idl",
          "notifications/notification_options.idl",
          "payments/address_errors.idl",
          "payments/android_pay_method_data.idl",
          "payments/android_pay_tokenization.idl",
          "payments/basic_card_request.idl",
          "payments/can_make_payment_event_init.idl",
          "payments/image_object.idl",
          "payments/merchant_validation_event_init.idl",
          "payments/payer_errors.idl",
          "payments/payment_address_init.idl",
          "payments/payment_currency_amount.idl",
          "payments/payment_details_base.idl",
          "payments/payment_details_init.idl",
          "payments/payment_details_modifier.idl",
          "payments/payment_details_update.idl",
          "payments/payment_handler_response.idl",
          "payments/payment_instrument.idl",
          "payments/payment_item.idl",
          "payments/payment_method_change_event_init.idl",
          "payments/payment_method_data.idl",
          "payments/payment_options.idl",
          "payments/payment_request_details_update.idl",
          "payments/payment_request_event_init.idl",
          "payments/payment_request_update_event_init.idl",
          "payments/payment_shipping_option.idl",
          "payments/payment_validation_errors.idl",
          "picture_in_picture/enter_picture_in_picture_event_init.idl",
          "picture_in_picture/picture_in_picture_options.idl",
          "presentation/presentation_connection_available_event_init.idl",
          "presentation/presentation_connection_close_event_init.idl",
          "push_messaging/push_event_init.idl",
          "push_messaging/push_subscription_change_event_init.idl",
          "push_messaging/push_subscription_options_init.idl",
          "scheduler/scheduler_post_task_options.idl",
          "sensor/sensor_error_event_init.idl",
          "sensor/sensor_options.idl",
          "sensor/spatial_sensor_options.idl",
          "shapedetection/barcode_detector_options.idl",
          "shapedetection/face_detector_options.idl",
          "shapedetection/landmark.idl",
          "sms/sms_receiver_options.idl",
          "storage/storage_event_init.idl",
          "webcodecs/video_decoder_init_parameters.idl",
          "webcodecs/video_track_writer_parameters.idl",
          "webmidi/midi_connection_event_init.idl",
          "webmidi/midi_message_event_init.idl",
          "webmidi/midi_options.idl",
          "webshare/share_data.idl",
          "websockets/close_event_init.idl",
          "websockets/websocket_close_info.idl",
          "websockets/websocket_connection.idl",
          "websockets/websocket_stream_options.idl",
          "webtransport/web_transport_close_info.idl",
          "webtransport/stream_abort_info.idl",
          "webusb/usb_connection_event_init.idl",
          "webusb/usb_control_transfer_parameters.idl",
          "webusb/usb_device_filter.idl",
          "webusb/usb_device_request_options.idl",
        ],
        "abspath")

# 'partial interface' or target (right side of) 'implements'
modules_dependency_idl_files =
    get_path_info(
        [
          "animationworklet/css_animation_worklet.idl",
          "app_banner/window_installation.idl",
          "audio_output_devices/html_media_element_audio_output_device.idl",
          "background_fetch/service_worker_global_scope_background_fetch.idl",
          "background_fetch/service_worker_registration_background_fetch.idl",
          "background_sync/service_worker_global_scope_sync.idl",
          "background_sync/service_worker_registration_sync.idl",
          "badging/navigator_badge.idl",
          "badging/worker_navigator_badge.idl",
          "battery/navigator_battery.idl",
          "beacon/navigator_beacon.idl",
          "bluetooth/navigator_bluetooth.idl",
          "cache_storage/window_cache_storage.idl",
          "cache_storage/worker_cache_storage.idl",
          "canvas/canvas2d/canvas_path.idl",
          "clipboard/navigator_clipboard.idl",
          "contacts_picker/navigator_contacts.idl",
          "content_index/service_worker_global_scope_content_index.idl",
          "content_index/service_worker_registration_content_index.idl",
          "cookie_store/service_worker_global_scope_cookie_store.idl",
          "cookie_store/service_worker_registration_cookies.idl",
          "cookie_store/window_cookie_store.idl",
          "credentialmanager/credential_user_data.idl",
          "credentialmanager/navigator_credentials.idl",
          "crypto/window_crypto.idl",
          "crypto/worker_global_scope_crypto.idl",
          "csspaint/css_paint_worklet.idl",
          "device_orientation/window_device_motion.idl",
          "device_orientation/window_device_orientation.idl",
          "donottrack/navigator_do_not_track.idl",
          "encryptedmedia/html_media_element_encrypted_media.idl",
          "encryptedmedia/media_keys_get_status_for_policy.idl",
          "encryptedmedia/navigator_request_media_key_system_access.idl",
          "filesystem/data_transfer_item_file_system.idl",
          "filesystem/dedicated_worker_global_scope_file_system.idl",
          "filesystem/dev_tools_host_file_system.idl",
          "filesystem/html_input_element_file_system.idl",
          "filesystem/shared_worker_global_scope_file_system.idl",
          "filesystem/window_file_system.idl",
          "launch/dom_window_launch_queue.idl",
          "gamepad/navigator_gamepad.idl",
          "geolocation/navigator_geolocation.idl",
          "hid/navigator_hid.idl",
          "indexeddb/window_indexed_database.idl",
          "indexeddb/worker_global_scope_indexed_database.idl",
          "installedapp/navigator_installed_app.idl",
          "keyboard/navigator_keyboard.idl",
          "locks/navigator_locks.idl",
          "locks/worker_navigator_locks.idl",
          "media_capabilities/navigator_media_capabilities.idl",
          "media_capabilities/worker_navigator_media_capabilities.idl",
          "mediacapturefromelement/html_canvas_element_capture.idl",
          "mediacapturefromelement/html_media_element_capture.idl",
          "mediasession/navigator_media_session.idl",
          "mediasource/audio_track_source_buffer.idl",
          "mediasource/html_video_element_media_source.idl",
          "mediasource/url_media_source.idl",
          "mediasource/video_track_source_buffer.idl",
          "native_file_system/window_native_file_system.idl",
          "navigatorcontentutils/navigator_content_utils.idl",
          "notifications/service_worker_global_scope_notifications.idl",
          "notifications/service_worker_registration_notifications.idl",
          "payments/html_iframe_element_payments.idl",
          "payments/payment_app_service_worker_global_scope.idl",
          "payments/payment_app_service_worker_registration.idl",
          "picture_in_picture/document_picture_in_picture.idl",
          "picture_in_picture/html_element_picture_in_picture.idl",
          "picture_in_picture/html_video_element_picture_in_picture.idl",
          "picture_in_picture/shadow_root_picture_in_picture.idl",
          "plugins/navigator_plugins.idl",
          "presentation/navigator_presentation.idl",
          "push_messaging/service_worker_global_scope_push.idl",
          "push_messaging/service_worker_registration_push.idl",
          "remoteplayback/html_media_element_remote_playback.idl",
          "scheduler/window_scheduler.idl",
          "screen_enumeration/screen_enumeration.idl",
          "screen_orientation/screen_screen_orientation.idl",
          "sms/navigator_sms.idl",
          "srcobject/html_media_element_src_object.idl",
          "storage/window_storage.idl",
          "wake_lock/navigator_wake_lock.idl",
          "wake_lock/worker_navigator_wake_lock.idl",
          "webdatabase/window_web_database.idl",
          "webgl/webgl2_rendering_context_base.idl",
          "webgl/webgl_rendering_context_base.idl",
          "webmidi/navigator_web_midi.idl",
          "webshare/navigator_share.idl",
          "webusb/navigator_usb.idl",
          "webusb/worker_navigator_usb.idl",
        ],
        "abspath")

# Do not add anything to this list. See _idl_imports below instead
# for the preferred mechanism.
modules_testing_dependency_idl_files = []

_idl_imports = [
  "//third_party/blink/renderer/modules/accessibility/idls.gni",
  "//third_party/blink/renderer/modules/canvas/idls.gni",
  "//third_party/blink/renderer/modules/mediastream/idls.gni",
  "//third_party/blink/renderer/modules/netinfo/idls.gni",
  "//third_party/blink/renderer/modules/peerconnection/idls.gni",
  "//third_party/blink/renderer/modules/permissions/idls.gni",
  "//third_party/blink/renderer/modules/quota/idls.gni",
  "//third_party/blink/renderer/modules/service_worker/idls.gni",
  "//third_party/blink/renderer/modules/speech/idls.gni",
  "//third_party/blink/renderer/modules/vibration/idls.gni",
  "//third_party/blink/renderer/modules/video_raf/idls.gni",
  "//third_party/blink/renderer/modules/webaudio/idls.gni",
  "//third_party/blink/renderer/modules/webgl/idls.gni",
  "//third_party/blink/renderer/modules/webgpu/idls.gni",
  "//third_party/blink/renderer/modules/xr/idls.gni",
]
if (!is_android) {
  _idl_imports += [ "//third_party/blink/renderer/modules/serial/idls.gni" ]
}

foreach(idl_import, _idl_imports) {
  # Avoid reassignment error by assigning to empty scope first.
  _imported = {
  }
  _imported = read_file(idl_import, "scope")

  # Paths are potentially relative to the location of the .gni. Rebase them
  # relative to "." so get_path_info() works as expected.
  gni_dir = get_path_info(idl_import, "dir")

  if (defined(_imported.modules_idl_files)) {
    modules_idl_files +=
        get_path_info(rebase_path(_imported.modules_idl_files, ".", gni_dir),
                      "abspath")
  }

  if (defined(_imported.modules_callback_function_idl_files)) {
    modules_callback_function_idl_files +=
        get_path_info(rebase_path(_imported.modules_callback_function_idl_files,
                                  ".",
                                  gni_dir),
                      "abspath")
  }

  if (defined(_imported.modules_dictionary_idl_files)) {
    modules_dictionary_idl_files +=
        get_path_info(
            rebase_path(_imported.modules_dictionary_idl_files, ".", gni_dir),
            "abspath")
  }

  if (defined(_imported.modules_dependency_idl_files)) {
    modules_dependency_idl_files +=
        get_path_info(
            rebase_path(_imported.modules_dependency_idl_files, ".", gni_dir),
            "abspath")
  }

  if (defined(_imported.modules_testing_dependency_idl_files)) {
    modules_testing_dependency_idl_files +=
        get_path_info(
            rebase_path(_imported.modules_testing_dependency_idl_files,
                        ".",
                        gni_dir),
            "abspath")
  }
}

modules_definition_idl_files = modules_dictionary_idl_files + modules_idl_files

# Static IDL files
modules_static_interface_idl_files = modules_callback_function_idl_files

modules_static_dependency_idl_files =
    modules_dependency_idl_files + modules_testing_dependency_idl_files

modules_generated_dependency_idl_files =
    modules_core_global_constructors_generated_idl_files +
    modules_global_constructors_generated_idl_files

# 'modules_dependency_idl_files' is already used in Source/modules, so avoid
# collision
modules_all_dependency_idl_files =
    modules_static_dependency_idl_files + modules_generated_dependency_idl_files
