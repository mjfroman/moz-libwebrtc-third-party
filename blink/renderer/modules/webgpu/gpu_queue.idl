// Copyright 2019 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

// https://gpuweb.github.io/gpuweb/

[
    Exposed(Window WebGPU, Worker WebGPU)
] interface GPUQueue {
    void submit(sequence<GPUCommandBuffer> buffers);

    GPUFence createFence(optional GPUFenceDescriptor descriptor = {});
    void signal(GPUFence fence, GPUFenceValue signalValue);

    // TODO(crbug.com/1088107): |data| should be [AllowShared] ArrayBuffer,
    // or maybe [AllowShared] ArrayBufferView
    // (https://github.com/gpuweb/gpuweb/issues/820)
    [RaisesException] void writeBuffer(
        GPUBuffer buffer,
        GPUSize64 bufferOffset,
        ArrayBuffer data,
        optional GPUSize64 dataOffset = 0,
        optional GPUSize64 size);

    [RaisesException] void copyImageBitmapToTexture(
        GPUImageBitmapCopyView source,
        GPUTextureCopyView destination,
        GPUExtent3D copySize);
};
