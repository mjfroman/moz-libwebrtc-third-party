This is a testharness.js-based test.
PASS requestClose() with no user activation only fires close
PASS destroy() then requestClose() fires no events
PASS close() then requestClose() fires only one close event
PASS requestClose() then destroy() fires only one close event
PASS close() then destroy() fires only one close event
PASS Esc key does not count as user activation, so it fires close but not cancel
PASS destroy() then close via Esc key fires no events
PASS Esc key then destroy() fires only one close event
PASS close via synthesized Esc key should not work
Harness: the test ran to completion.

