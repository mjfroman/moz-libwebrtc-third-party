<!DOCTYPE html>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script>

function runAlertTest() {
  window.alert('Hello! Preprendering!');
  bc.postMessage('no block');
}

function runConfirmTest() {
  const result = window.confirm('Are you preprendering page?');
  bc.postMessage('the return value is ' + (result === true ? 'yes' : 'no'));
}

function runPromptTest() {
  const result = window.prompt('Are you preprendering page?', 'the default value');
  bc.postMessage('the return value is ' +
                 (result === '' ? 'the empty string' : result));
}

const bc = new BroadcastChannel('prerender-channel');
assert_true(document.prerendering);
const params = new URLSearchParams(location.search);

if (params.has('alert'))
  runAlertTest();
else if (params.has('confirm'))
  runConfirmTest();
else if (params.has('prompt'))
  runPromptTest();

bc.close();
</script>
