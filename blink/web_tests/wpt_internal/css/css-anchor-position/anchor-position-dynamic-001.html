<!DOCTYPE html>
<title>Tests `anchor` function when anchor positions are changed dynamically</title>
<link rel="help" href="https://tabatkins.github.io/specs/css-anchor-position/#propdef-anchor-name">
<link rel="author" href="mailto:kojii@chromium.org">
<link ref="match" href="reference/anchor-position-001-ref.html">
<style>
#container {
  position: relative;
}
#a1 {
  anchor-name: --a1;
  background: orange;
  position: absolute;
  left: 100px;
  top: 100px;
  width: 50px;
  height: 50px;
}
.after #a1 {
  width: 100px;
  height: 100px;
}
#a2 {
  anchor-name: --a2;
  background: purple;
  position: absolute;
  left: 250px;
  top: 350px;
  width: 100px;
  height: 100px;
}
.after #a2 {
  left: 500px;
  top: 300px;
}
#target {
  background: green;
  position: absolute;
  left: anchor(--a1 right);
  top: anchor(--a1 bottom);
  right: anchor(--a2 left);
  bottom: anchor(--a2 top);
}
#ref {
  background: red;
  position: absolute;
  left: 200px;
  top: 200px;
  width: 300px;
  height: 100px;
}
</style>
<body id="container">
  <div id="a1"></div>
  <div id="a2"></div>
  <div id="ref"></div>
  <div id="target"></div>
<script>
document.body.offsetTop;  // Force layout.
container.classList.add('after');
</script>
</body>
