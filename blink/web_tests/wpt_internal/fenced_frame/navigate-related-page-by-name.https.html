<!DOCTYPE html>
<title>Test named frame navigation of related pages.</title>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="/common/utils.js"></script>
<script src="/common/dispatcher/dispatcher.js"></script>
<script src="resources/utils.js"></script>

<body>
<script>
promise_test(async () => {
  // Create an auxiliary browsing context with a particular name.
  const second_window = attachWindowContext({target: "target_name"});

  // Create a fenced frame, and use the same target name inside of it.
  const frame = attachFencedFrameContext();
  await frame.execute(async () => {
    window.open("resources/dummy.html", "target_name");
  });

  // Confirm that the top-level frame's related page (`second_window`)
  // wasn't navigated by the fenced frame, i.e. that name resolution
  // for related pages is fenced.
  await second_window.execute(() => {});
}, 'navigate related pages');
</script>
</body>
