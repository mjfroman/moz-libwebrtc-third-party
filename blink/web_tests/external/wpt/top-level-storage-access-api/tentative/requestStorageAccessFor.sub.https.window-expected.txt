This is a testharness.js-based test.
PASS [top-level-context] document.requestStorageAccessFor() should be supported on the document interface
PASS [top-level-context] document.requestStorageAccessFor() should be rejected when called with no argument
PASS [top-level-context] document.requestStorageAccessFor() should be rejected by default with no user gesture
PASS [non-fully-active] document.requestStorageAccessFor() should not resolve when run in a detached frame
PASS [non-fully-active] document.requestStorageAccessFor() should not resolve when run in a detached DOMParser document
FAIL [top-level-context] document.requestStorageAccessFor() should be resolved without a user gesture with an existing permission promise_test: Unhandled rejection with value: object "NotAllowedError: requestStorageAccessFor not allowed"
PASS [top-level-context] document.requestStorageAccess() should be resolved without a user gesture after a successful requestStorageAccessFor() call
PASS [top-level-context] document.requestStorageAccessFor() should be resolved when called properly with a user gesture and the same site
PASS [top-level-context] document.requestStorageAccessFor() should be rejected when called with an invalid site
PASS [top-level-context] document.requestStorageAccessFor() should be rejected when called with an opaque origin
PASS [same-origin-frame] document.requestStorageAccessFor() should be supported on the document interface
PASS [same-origin-frame] document.requestStorageAccessFor() should be rejected when called with no argument
PASS [same-origin-frame] document.requestStorageAccessFor() should be rejected when called in an iframe
PASS [request-storage-access-integration] document.requestStorageAccess() should be resolved without a user gesture with an existing top-level-storage-access permission
Harness: the test ran to completion.

