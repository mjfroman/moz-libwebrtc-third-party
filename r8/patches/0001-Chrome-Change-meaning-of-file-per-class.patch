From 0cc1077ef5dcdccafc5f526e682dff88d46c67ff Mon Sep 17 00:00:00 2001
From: Andrew Grieve <agrieve@chromium.org>
Date: Wed, 1 Apr 2020 09:59:30 -0400
Subject: [PATCH 1/5] Chrome: Change meaning of --file-per-class

Make it mean OutputMode.DexFilePerClassFile instead of
OutputMode.DexFilePerClass.

Fixes Chrome's incremental dexing logic.
---
 src/main/java/com/android/tools/r8/D8CommandParser.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/main/java/com/android/tools/r8/D8CommandParser.java b/src/main/java/com/android/tools/r8/D8CommandParser.java
index f66fff8f3..c63f4f566 100644
--- a/src/main/java/com/android/tools/r8/D8CommandParser.java
+++ b/src/main/java/com/android/tools/r8/D8CommandParser.java
@@ -205,7 +205,7 @@ public class D8CommandParser extends BaseCompilerCommandParser<D8Command, D8Comm
         }
         compilationMode = CompilationMode.RELEASE;
       } else if (arg.equals("--file-per-class")) {
-        outputMode = OutputMode.DexFilePerClass;
+        outputMode = OutputMode.DexFilePerClassFile;
       } else if (arg.equals("--output")) {
         if (outputPath != null) {
           builder.error(
-- 
2.26.0.rc2.310.g2932bb562d-goog

