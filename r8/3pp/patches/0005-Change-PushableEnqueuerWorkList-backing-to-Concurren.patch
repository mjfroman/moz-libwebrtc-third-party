From ffba24c4288a3f7c8ee1d2d43c92c82c29e077fb Mon Sep 17 00:00:00 2001
From: Morten Krogh-Jespersen <mkroghj@google.com>
Date: Wed, 7 Jul 2021 16:37:56 +0200
Subject: [PATCH 5/5] Change PushableEnqueuerWorkList backing to
 ConcurrentLinkedQueue

Bug: 193003098
Change-Id: If667bb01502dad0efec7a16aea1b1aa93bfbaffb
---
 .../java/com/android/tools/r8/shaking/EnqueuerWorklist.java   | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/main/java/com/android/tools/r8/shaking/EnqueuerWorklist.java b/src/main/java/com/android/tools/r8/shaking/EnqueuerWorklist.java
index 47684370e..2fcac5531 100644
--- a/src/main/java/com/android/tools/r8/shaking/EnqueuerWorklist.java
+++ b/src/main/java/com/android/tools/r8/shaking/EnqueuerWorklist.java
@@ -18,8 +18,8 @@ import com.android.tools.r8.shaking.GraphReporter.KeepReasonWitness;
 import com.android.tools.r8.utils.Action;
 import com.android.tools.r8.utils.InternalOptions;
 import com.android.tools.r8.utils.collections.ProgramMethodSet;
-import java.util.ArrayDeque;
 import java.util.Queue;
+import java.util.concurrent.ConcurrentLinkedQueue;
 
 public abstract class EnqueuerWorklist {
 
@@ -369,7 +369,7 @@ public abstract class EnqueuerWorklist {
   static class PushableEnqueuerWorkList extends EnqueuerWorklist {
 
     PushableEnqueuerWorkList(Enqueuer enqueuer) {
-      super(enqueuer, new ArrayDeque<>());
+      super(enqueuer, new ConcurrentLinkedQueue<>());
     }
 
     @Override
-- 
2.32.0.93.g670b81a890-goog

